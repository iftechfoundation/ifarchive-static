# Virtual host info for secondary subdomains.

# This can't be in a VirtualHost section
WSGIPythonPath /var/ifarchive/wsgi-bin

<VirtualHost 45.79.155.122:80 2600:3c03::f03c:91ff:fe3e:fc79:80>
    ServerName babel.ifarchive.org

    DocumentRoot /var/ifarchive/subdom/babel/htdocs
    CustomLog /var/ifarchive/logs/apache-babel-access.log combined
    ErrorLog /var/ifarchive/logs/apache-babel-error.log

    <Directory "/var/ifarchive/subdom/babel/htdocs/">
       Order allow,deny
       Allow from all
       Require all granted
       Options +Indexes +FollowSymLinks +MultiViews
    </Directory>

</VirtualHost>

<VirtualHost 45.79.155.122:443 2600:3c03::f03c:91ff:fe3e:fc79:443>
    ServerName babel.ifarchive.org

    SSLEngine On
    SSLCertificateKeyFile /etc/letsencrypt/live/ifarchive.org/privkey.pem
    SSLCertificateFile /etc/letsencrypt/live/ifarchive.org/cert.pem
    SSLCertificateChainFile /etc/letsencrypt/live/ifarchive.org/fullchain.pem

    DocumentRoot /var/ifarchive/subdom/babel/htdocs
    CustomLog /var/ifarchive/logs/apache-babel-access.log combined
    ErrorLog /var/ifarchive/logs/apache-babel-error.log

    <Directory "/var/ifarchive/subdom/babel/htdocs/">
       Order allow,deny
       Allow from all
       Require all granted
       Options +Indexes +FollowSymLinks +MultiViews
    </Directory>

</VirtualHost>

<VirtualHost 45.79.155.122:443 2600:3c03::f03c:91ff:fe3e:fc79:443>
    ServerName inform-fiction.ifarchive.org
    ServerAlias inform-fiction.org
    ServerAlias www.inform-fiction.org

    SSLEngine On
    SSLCertificateKeyFile /etc/letsencrypt/live/ifarchive.org/privkey.pem
    SSLCertificateFile /etc/letsencrypt/live/ifarchive.org/cert.pem
    SSLCertificateChainFile /etc/letsencrypt/live/ifarchive.org/fullchain.pem

    DocumentRoot /var/ifarchive/subdom/inform-fiction/htdocs
    CustomLog /var/ifarchive/logs/apache-inform-fiction-access.log combined
    ErrorLog /var/ifarchive/logs/apache-inform-fiction-error.log

    <Location "/">
       Options +Includes
       AddOutputFilter INCLUDES .html

       AddType application/x-zmachine z1 z2 z3 z4 z5 z6 z7 z8
       AddType application/x-blorb blb BLB blorb BLORB
       AddType application/x-blorb;profile="zcode" zlb zblorb
       AddType application/x-blorb;profile="glulx" glb gblorb
       AddHandler default-handler .pl
       AddType text/plain .pl

       RewriteEngine On
       RewriteBase /
       RewriteRule inform6.html /index.html [R=permanent,L]
    
       Redirect /I7Downloads/Documents http://inform7.com/learn/documents
       Redirect /I7Downloads/Examples/alabaster http://emshort.home.mindspring.com/Alabaster
       Redirect /I7Downloads/Examples http://inform7.com/learn/eg
       Redirect /I7Downloads/Extensions http://inform7.com/extensions
       Redirect /I7Downloads/Anthology http://inform7.com/if/anthology
       Redirect /I7Downloads/ReleaseNotes.txt http://inform7.com/learn/logs/6G60.txt
    </Location>
					
    <Directory "/var/ifarchive/subdom/inform-fiction/htdocs/">
       Order allow,deny
       Allow from all
       Require all granted
       Options +Indexes +FollowSymLinks +MultiViews
    </Directory>

    # Text and I6 source files are assumed to be Latin-1.
    <Files *.txt>
       ForceType text/plain;charset="iso-8859-1"
    </Files>
    <Files *.inf>
       ForceType text/plain;charset="iso-8859-1"
    </Files>
    
    # Allow HTML files to set their own charset via meta tags.
    <Files *.html>
       ForceType text/html
    </Files>
    <Files *.htm>
       ForceType text/html
    </Files>

</VirtualHost>

<VirtualHost 45.79.155.122:80 2600:3c03::f03c:91ff:fe3e:fc79:80>
    ServerName inform-fiction.ifarchive.org
    ServerAlias inform-fiction.org
    ServerAlias www.inform-fiction.org

    DocumentRoot /var/ifarchive/subdom/inform-fiction/htdocs
    CustomLog /var/ifarchive/logs/apache-inform-fiction-access.log combined
    ErrorLog /var/ifarchive/logs/apache-inform-fiction-error.log

    <Location "/">
       Options +Includes
       AddOutputFilter INCLUDES .html

       AddType application/x-zmachine z1 z2 z3 z4 z5 z6 z7 z8
       AddType application/x-blorb blb BLB blorb BLORB
       AddType application/x-blorb;profile="zcode" zlb zblorb
       AddType application/x-blorb;profile="glulx" glb gblorb
       AddHandler default-handler .pl
       AddType text/plain .pl

       RewriteEngine On
       RewriteBase /
       RewriteRule inform6.html /index.html [R=permanent,L]
    
       Redirect /I7Downloads/Documents http://inform7.com/learn/documents
       Redirect /I7Downloads/Examples/alabaster http://emshort.home.mindspring.com/Alabaster
       Redirect /I7Downloads/Examples http://inform7.com/learn/eg
       Redirect /I7Downloads/Extensions http://inform7.com/extensions
       Redirect /I7Downloads/Anthology http://inform7.com/if/anthology
       Redirect /I7Downloads/ReleaseNotes.txt http://inform7.com/learn/logs/6G60.txt
    </Location>
					
    <Directory "/var/ifarchive/subdom/inform-fiction/htdocs/">
       Order allow,deny
       Allow from all
       Require all granted
       Options +Indexes +FollowSymLinks +MultiViews
    </Directory>

    # Text and I6 source files are assumed to be Latin-1.
    <Files *.txt>
       ForceType text/plain;charset="iso-8859-1"
    </Files>
    <Files *.inf>
       ForceType text/plain;charset="iso-8859-1"
    </Files>
    
    # Allow HTML files to set their own charset via meta tags.
    <Files *.html>
       ForceType text/html
    </Files>
    <Files *.htm>
       ForceType text/html
    </Files>

</VirtualHost>

<VirtualHost 45.79.155.122:80 2600:3c03::f03c:91ff:fe3e:fc79:80>
    ServerName infodoc.ifarchive.org

    DocumentRoot /var/ifarchive/subdom/infodoc/htdocs
    CustomLog /var/ifarchive/logs/apache-infodoc-access.log combined
    ErrorLog /var/ifarchive/logs/apache-infodoc-error.log

    <Directory "/var/ifarchive/subdom/infodoc/htdocs/">
       Order allow,deny
       Allow from all
       Require all granted
       Options +Indexes +FollowSymLinks +MultiViews
    </Directory>

    # We don't serve files; we redirect all comers to the real
    # InfoDoc archive on plover.net.
    # (Okay, we do serve files from Let's Encrypt's special ".well-known"
    # driectory. But that's it.)
    RewriteEngine On
    RewriteCond expr "! %{REQUEST_URI} -strmatch '/.well-known/*'"
    RewriteRule ^(.*)$ http://infodoc.plover.net/ [R]

</VirtualHost>

<VirtualHost 45.79.155.122:443 2600:3c03::f03c:91ff:fe3e:fc79:443>
    ServerName infodoc.ifarchive.org

    SSLEngine On
    SSLCertificateKeyFile /etc/letsencrypt/live/ifarchive.org/privkey.pem
    SSLCertificateFile /etc/letsencrypt/live/ifarchive.org/cert.pem
    SSLCertificateChainFile /etc/letsencrypt/live/ifarchive.org/fullchain.pem

    DocumentRoot /var/ifarchive/subdom/infodoc/htdocs
    CustomLog /var/ifarchive/logs/apache-infodoc-access.log combined
    ErrorLog /var/ifarchive/logs/apache-infodoc-error.log

    <Directory "/var/ifarchive/subdom/infodoc/htdocs/">
       Order allow,deny
       Allow from all
       Require all granted
       Options +Indexes +FollowSymLinks +MultiViews
    </Directory>

    # We don't serve files; we redirect all comers to the real
    # InfoDoc archive on plover.net.
    # (Okay, we do serve files from Let's Encrypt's special ".well-known"
    # driectory. But that's it.)
    RewriteEngine On
    RewriteCond expr "! %{REQUEST_URI} -strmatch '/.well-known/*'"
    RewriteRule ^(.*)$ http://infodoc.plover.net/ [R]

</VirtualHost>

<VirtualHost 45.79.155.122:80 2600:3c03::f03c:91ff:fe3e:fc79:80>
    ServerName spag.ifarchive.org
    ServerAlias spagmag.org
    ServerAlias www.spagmag.org

    DocumentRoot /var/ifarchive/subdom/spag/htdocs
    CustomLog /var/ifarchive/logs/apache-spag-access.log combined
    ErrorLog /var/ifarchive/logs/apache-spag-error.log

    <Directory "/var/ifarchive/subdom/spag/htdocs/">
       Order allow,deny
       Allow from all
       Require all granted
       Options +Indexes +FollowSymLinks +MultiViews
       AllowOverride FileInfo
    </Directory>

</VirtualHost>

<VirtualHost 45.79.155.122:443 2600:3c03::f03c:91ff:fe3e:fc79:443>
    ServerName spag.ifarchive.org
    ServerAlias spagmag.org
    ServerAlias www.spagmag.org

    SSLEngine On
    SSLCertificateKeyFile /etc/letsencrypt/live/ifarchive.org/privkey.pem
    SSLCertificateFile /etc/letsencrypt/live/ifarchive.org/cert.pem
    SSLCertificateChainFile /etc/letsencrypt/live/ifarchive.org/fullchain.pem

    DocumentRoot /var/ifarchive/subdom/spag/htdocs
    CustomLog /var/ifarchive/logs/apache-spag-access.log combined
    ErrorLog /var/ifarchive/logs/apache-spag-error.log

    <Directory "/var/ifarchive/subdom/spag/htdocs/">
       Order allow,deny
       Allow from all
       Require all granted
       Options +Indexes +FollowSymLinks +MultiViews
       AllowOverride FileInfo
    </Directory>

</VirtualHost>

<VirtualHost 45.79.155.122:80 2600:3c03::f03c:91ff:fe3e:fc79:80>
    ServerName rsync.ifarchive.org

    DocumentRoot /var/ifarchive/subdom/rsync/htdocs
    CustomLog /var/ifarchive/logs/apache-misc-access.log combined
    ErrorLog /var/ifarchive/logs/apache-misc-error.log

    <Directory "/var/ifarchive/subdom/rsync/htdocs/">
       Order allow,deny
       Allow from all
       Require all granted
       Options +Indexes +FollowSymLinks +MultiViews
    </Directory>

</VirtualHost>

<VirtualHost 45.79.155.122:443 2600:3c03::f03c:91ff:fe3e:fc79:443>
    ServerName rsync.ifarchive.org

    SSLEngine On
    SSLCertificateKeyFile /etc/letsencrypt/live/ifarchive.org/privkey.pem
    SSLCertificateFile /etc/letsencrypt/live/ifarchive.org/cert.pem
    SSLCertificateChainFile /etc/letsencrypt/live/ifarchive.org/fullchain.pem

    DocumentRoot /var/ifarchive/subdom/rsync/htdocs
    CustomLog /var/ifarchive/logs/apache-misc-access.log combined
    ErrorLog /var/ifarchive/logs/apache-misc-error.log

    <Directory "/var/ifarchive/subdom/rsync/htdocs/">
       Order allow,deny
       Allow from all
       Require all granted
       Options +Indexes +FollowSymLinks +MultiViews
    </Directory>

</VirtualHost>
